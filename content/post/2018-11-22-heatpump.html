---
title: "Buying a heat pump the data scientist way"
author: "Simon Coulombe"
date: 2018-11-22
slug: "heatpump"
output:
  html_document:
    code_folding: hide
    number_sections: true
    theme: simplex
    toc: true
    toc_depth: 3
    toc_float:
      collapsed: false
      smooth_scroll: true
    editor_options:   
      chunk_output_type: console
categories: ["R"]
tags: ["weathercan", "heat pump", "rstats"]
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>
<link href="/rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>


<div id="context" class="section level1">
<h1>Context</h1>
<p>The Summer of 2018 was ridiculously hot and we decided that we wanted to buy a central air conditioning unit. Would spending more to get an air-air heat pump instead make economic and environmental sense?</p>
<p>a quick note: shopping for heat pumps sucks. Every salesman claims to have the best reliability and service, and there is no independent source that will help you sort it out.</p>
</div>
<div id="a-quick-introduction-to-heat-pumps" class="section level1">
<h1>A quick introduction to heat pumps</h1>
<p>The air-to-air heat pump is an amazing device.</p>
<p>During the Summer it operates like any air conditioning device, transferring heat from the air inside the house to the air outside. During the Winter, it reverses it’s operation and efficiently transfers the heat from the (cold) air outside to the warm air inside my house.</p>
<p>The efficiency of the heat pump is measured by it’s coefficient of performance (COP), which measures how many kWh of heat will be added to my house for each kWh of electricity used by the pump. For Energy Star rated heat pumps, the COP hovers between 2 and 4 depending on the outside temperature. The closer the outside temperature is to the inside temperature, the higher the efficiency.</p>
<p>As a comparison, electric furnace and electric baseboard are 100% efficient at converting electrity to heat, which means they have a a COP of 1. Heating systems based on burning stuff are less than 100% efficient since some heat escapes through the chimney, achieving COPs between 0.6 and 0.9.</p>
<p>The capacity of the heatpump measures how much energy it can transfer to the house over a period of time. A COP of 4 isn’t impressive if the pump is only able to multiply the energy output of a single candle by 4, as that won’t be enough to heat my house during winter. The capacity of most heat pumps generally falls dramatically around -12C, with the Mitsubishi Zuba being a very expensive outlier.</p>
<p>In Canada, the capacity of heating systems is measured in MBH, where 1 MBH is 1000 Btu/h. 1 kW is equivalent to 3.41 MBH.</p>
<p>It is complicated to compare the efficiency of different heat pumps because their COP varies with the temperature. Heat pump “A”&quot; could have a higher COP than Heat pump “B”&quot; at 10C, while the opposite could be true at 5C. To simplify comparisons, the technical sheets typically include the Heating Seasonal Performance Factor (HSPF), which is a form of seasonnally-adjusted COP for a specific climate. The HSPF is defined as the ratio between the MBH output and the kWh input, so if you want the ratio of kWh input to kWh output you have divide it by 3.41.</p>
<p>I am considering purchasing the <a href="https://www.master.ca/en/groups/central-heat-pump-yhe-lx-series-">York YHE24B21S</a> central heat pump with a CF24BXA1 coil and a ME12BN21 air handler.<br />
<img src="images/yhe_img.png" alt="yhe_img" /></p>
<p>This setup has a <a href="http://www.upgnet.com/PdfFileRedirect/5005747-YTG-A-0216.PDF#page=5">published HSPF of 8.50 in region 4</a>, which is equivalent to a HSPF of 7.391 in region 5. Dividing by 3,41, we obtain an average COP of 2.16, meaning that the heatpump should divide your heating bill by 2.16 in region 5. Region 5 has a <a href="https://www.nrcan.gc.ca/energy/publications/efficiency/heating-heat-pump/6831">climate equivalent to the city of Ottawa</a>. Quebec City is colder on average, which means the system should also be less efficient on average.</p>
<p>A house heated with a heat pump has to have a backup system. In my case, the backup system is an electric furnace. There are two reasons to shift from the heat pump to the backup system:</p>
<ul>
<li>As the outside temperature drops, the COP will also drop and will eventually reach a point where you the heat pump isn’t more efficient than your backup system. At that point, you should switch to your backup system to reduce wear and tear. I don’t remember the source, but I read somewhere that switching around a COP of 1.5 makes sense.<br />
</li>
<li>As the outside temperature drops, the capacity of the heatpump will drop while the heating needs of your house increases. If the heat pump can’t provide enough heat, you must switch it off and use the backup system instead.</li>
</ul>
</div>
<div id="economic-objective" class="section level1">
<h1>Economic objective</h1>
<p>The heat pump and a new 15 kW electric furnace will cost me 7500$ after taxes and subsidies. The net cost of upgrading from an air conditioner to a heat pump is not clear and I ended up never getting a quote for only the central air conditioner. For argument’s sake let’s say that it’s about 4000 $. The heat pump is warrantied parts and labor for 10 years, so we will assume that it will work without maintenance for 10 years, then stop working.</p>
<p>A rule of thumb is that heating represents about <a href="http://www.hydroquebec.com/residential/customer-space/electricity-use/electricity-consumption-by-use.html">50-60%</a> of a house’s electricity needs in Quebec. This is my first year in my house, but the former owners spent about 3000$ on electricity every year. We will assume that my heating costs are about 1800$ (60%) per year since my house is older with bad insulation.</p>
<p><strong>Objective: I’ll be happy to break even if it means reducing my energy use.</strong></p>
<p>To figure out my savings, I will need to generate a custom HSPF based on my local climate, my heat pump’s specification and my house’s energy needs.</p>
</div>
<div id="heat-pump-efficiency-and-capacity" class="section level1">
<h1>Heat Pump efficiency and capacity</h1>
<p>The <a href="http://www.upgnet.com/PdfFileRedirect/5005747-YTG-A-0216.PDF#page=41">technical sheet</a> of the York heat pump gives us the efficiency and capacity of the heat pump for 6 temperatures. I need to know these values for all possible temperature, so I create two functions, <code>get_COP</code> and <code>get_MBH</code> that linearly interpolate the values.</p>
<p>I will assume that the heat pump stops working at the lowest temperature on the technical sheet (-12.2C). The quote I received says that it operates until -17C, but I haven’t seen that value in any official documentation.</p>
<div class="figure">
<img src="images/yhe.png" alt="yhe specs" />
<p class="caption">yhe specs</p>
</div>
<p><img src="/post/2018-11-22-heatpump_files/figure-html/unnamed-chunk-2-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="weather-data" class="section level1">
<h1>Weather Data</h1>
<p>Two things depend on the outside temperature: my house’s energy needs and the heat pump’s efficiency and capacity.</p>
<p>For this project, we will us rOpenSci’s <code>weathercan</code> package along the usual suspects from the tidyverse. Provided my longitude and latitude, the <code>weathercan</code>package will download the hourly temperature data for the closest local Environment Canada weather station.</p>
<p><div id="htmlwidget-1" style="width:960px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366],"y":[-7.26458333333333,-8.83333333333333,-10.9984375,-10.6557291666667,-10.6125,-10.2145833333333,-10.8203125,-10.1263157894737,-9.10052356020942,-7.59010416666667,-7.14583333333333,-5.0125,-7.303125,-10.4256544502618,-10.084375,-7.8765625,-10.1098958333333,-8.9046875,-7.025,-8.8125,-12.7213541666667,-13.8598958333333,-13.4717277486911,-10.9854166666667,-8.546875,-9.13541666666667,-8.39166666666667,-8.18125,-7.403125,-8.7515625,-9.959375,-11.2583333333333,-12.6619791666667,-12.4317708333333,-9.2765625,-10.54,-10.2510416666667,-11.85,-10.9109375,-10.9723958333333,-10.6854166666667,-11.6552083333333,-11.1354166666667,-11.465445026178,-10.1244791666667,-9.00260416666667,-6.6171875,-6.446875,-5.99322916666667,-4.98125,-4.95208333333333,-6.79371727748691,-4.24947916666667,-4.746875,-4.7828125,-4.09322916666667,-8.21666666666667,-7.5453125,-6.24166666666667,-5.79739583333333,-6.67748691099476,-9.76439790575916,-8.71875,-8.184375,-7.4,-5.70260416666667,-2.46875,-2.78385416666667,-3.4453125,-2.33072916666667,-2.996875,-2.96666666666667,-3.69479166666667,-2.99270833333333,-3.928125,-3.0125,-3.47760416666667,-2.7265625,-1.8125,-0.449479166666667,-2.8609375,-3.3265625,-2.28854166666667,-2.40732984293194,-2.88020833333333,-3.8765625,-1.35572916666667,0.431770833333333,0.755729166666667,0.498958333333333,0.578125,1.38541666666667,3.00729166666667,0.861979166666667,0.00624999999999999,-0.0411458333333334,1.490625,2.16282722513089,3.37395833333333,4.5296875,3.94947916666667,3.7484375,4.51875,5.31041666666667,5.1265625,4.23177083333333,5.73697916666667,5.46243093922652,5.94583333333333,5.73229166666667,5.18177083333333,5.68489583333333,5.84375,5.50625,6.25104166666667,5.53697916666667,5.2015625,6.4609375,6.98385416666667,7.39583333333333,8.62146596858639,10.5497382198953,10.3223958333333,10.9036458333333,10.5338541666667,10.6921875,11.1424083769634,10.4145833333333,10.0010416666667,8.76145833333333,8.71979166666667,9.87083333333333,10.9927083333333,11.1010416666667,12.4172043010753,12.5104166666667,11.6359375,13.0661458333333,14.4541666666667,14.5411458333333,13.9697916666667,14.4427083333333,14.8371727748691,15.6765625,15.8932291666667,15.6119791666667,13.8416666666667,14.4241935483871,14.9375,15.7036458333333,16.240625,15.4796875,13.5489583333333,14.1911458333333,15.2203125,14.6317708333333,13.9994791666667,15.96875,16.6369791666667,16.8260416666667,16.0322916666667,17.5083333333333,17.0192708333333,17.2333333333333,16.1161458333333,17.3369791666667,16.29375,17.8109375,19.2958333333333,18.8567708333333,19.0098958333333,19.9921875,18.840625,19.0927083333333,18.7401041666667,17.9630208333333,16.7869791666667,18.0776041666667,17.4125,18.1010638297872,18.1083333333333,18.6,20.1317708333333,20.1734375,20.3473958333333,21.6682291666667,22.00625,21.5135416666667,20.6291666666667,19.9182291666667,19.6619791666667,20.0833333333333,20.3260416666667,21.0354166666667,22.5962962962963,21.9172972972973,22.0401041666667,21.3479166666667,20.7171875,20.0526041666667,19.8458333333333,19.6942708333333,20.5942708333333,21.051832460733,19.4347826086957,19.2072916666667,18.8302083333333,19.9760416666667,20.6765625,19.8666666666667,19.8760416666667,20.1140625,20.3020833333333,20.8473958333333,20.915625,21.0257894736842,20.4375,20.8636904761905,18.7214285714286,18.7267857142857,19.5575581395349,19.096875,19.1885416666667,19.265625,18.6322916666667,18.4697916666667,19.0322916666667,18.7697916666667,18.9,19.09375,19.9322916666667,20.2453125,20.1270833333333,19.2844086021505,18.2578125,19.1848958333333,19.2697916666667,19.4369791666667,19.8348958333333,18.2786458333333,17.9744791666667,18.6229166666667,19.5677083333333,18.909375,18.71875,17.9890625,16.8786458333333,17.4109375,17.465625,17.0356020942408,16.4739583333333,16.7770833333333,15.3197916666667,15.8046875,15.1302083333333,15.3645833333333,15.1692708333333,14.7833333333333,13.0717277486911,13.0848958333333,13.5729166666667,15.6520833333333,12.7947643979058,13.9244791666667,15.4260416666667,14.0489361702128,13.284375,12.8846560846561,13.8416666666667,14.0375,13.6682291666667,12.50625,11.5074468085106,11.1604166666667,11.0442708333333,11.3473958333333,10.7659459459459,10.3973958333333,10.0364583333333,11.234375,11.8677083333333,9.97395833333333,9.6265625,8.58697916666667,8.76770833333333,9.54166666666667,10.2208333333333,8.94166666666667,7.76510416666667,8.1140625,7.64842105263158,7.16822916666667,8.51510416666667,7.18125,7.28870056497175,6.13353293413174,4.80178571428571,5.97486338797814,4.99375,6.09042553191489,5.27864583333333,6.01927083333333,4.77864583333333,4.52291666666667,5.72539682539683,4.953125,4.40989583333333,3.3,3.51263157894737,4.9515625,2.93958333333333,1.8515625,3.96354166666667,2.4703125,1.48072916666667,0.996875,2.29322916666667,3.68534031413613,2.81458333333333,2.86875,1.9796875,1.25989583333333,0.376041666666667,-0.323958333333333,-2.20885416666667,-0.828645833333333,-1.19408602150538,-1.125,-0.764583333333333,-0.383333333333333,-0.813020833333333,-3.37239583333333,-3.64166666666667,-3.92552083333333,-2.28697916666667,-3.05989583333333,-1.05989583333333,-1.05183246073298,-1.38333333333333,-0.664583333333333,-4.140625,-5.16614583333333,-3.1578125,-4.37395833333333,-5.77864583333333,-6.03177083333333,-4.94031413612565,-7.92604166666667,-6.56354166666667,-8.90364583333333,-11.4911458333333,-8.146875,-5.76302083333333,-8.66197916666667,-6.95625,-4.89842105263158,-3.88697916666667,-6.22291666666667,-7.02604166666667,-7.06979166666667,-8.29895833333333,-7.0765625,-10.9643979057592,-11.8625,-10.2486772486772,-12.8708333333333],"text":["yday:   1<br />day_temp:  -7.26458333","yday:   2<br />day_temp:  -8.83333333","yday:   3<br />day_temp: -10.99843750","yday:   4<br />day_temp: -10.65572917","yday:   5<br />day_temp: -10.61250000","yday:   6<br />day_temp: -10.21458333","yday:   7<br />day_temp: -10.82031250","yday:   8<br />day_temp: -10.12631579","yday:   9<br />day_temp:  -9.10052356","yday:  10<br />day_temp:  -7.59010417","yday:  11<br />day_temp:  -7.14583333","yday:  12<br />day_temp:  -5.01250000","yday:  13<br />day_temp:  -7.30312500","yday:  14<br />day_temp: -10.42565445","yday:  15<br />day_temp: -10.08437500","yday:  16<br />day_temp:  -7.87656250","yday:  17<br />day_temp: -10.10989583","yday:  18<br />day_temp:  -8.90468750","yday:  19<br />day_temp:  -7.02500000","yday:  20<br />day_temp:  -8.81250000","yday:  21<br />day_temp: -12.72135417","yday:  22<br />day_temp: -13.85989583","yday:  23<br />day_temp: -13.47172775","yday:  24<br />day_temp: -10.98541667","yday:  25<br />day_temp:  -8.54687500","yday:  26<br />day_temp:  -9.13541667","yday:  27<br />day_temp:  -8.39166667","yday:  28<br />day_temp:  -8.18125000","yday:  29<br />day_temp:  -7.40312500","yday:  30<br />day_temp:  -8.75156250","yday:  31<br />day_temp:  -9.95937500","yday:  32<br />day_temp: -11.25833333","yday:  33<br />day_temp: -12.66197917","yday:  34<br />day_temp: -12.43177083","yday:  35<br />day_temp:  -9.27656250","yday:  36<br />day_temp: -10.54000000","yday:  37<br />day_temp: -10.25104167","yday:  38<br />day_temp: -11.85000000","yday:  39<br />day_temp: -10.91093750","yday:  40<br />day_temp: -10.97239583","yday:  41<br />day_temp: -10.68541667","yday:  42<br />day_temp: -11.65520833","yday:  43<br />day_temp: -11.13541667","yday:  44<br />day_temp: -11.46544503","yday:  45<br />day_temp: -10.12447917","yday:  46<br />day_temp:  -9.00260417","yday:  47<br />day_temp:  -6.61718750","yday:  48<br />day_temp:  -6.44687500","yday:  49<br />day_temp:  -5.99322917","yday:  50<br />day_temp:  -4.98125000","yday:  51<br />day_temp:  -4.95208333","yday:  52<br />day_temp:  -6.79371728","yday:  53<br />day_temp:  -4.24947917","yday:  54<br />day_temp:  -4.74687500","yday:  55<br />day_temp:  -4.78281250","yday:  56<br />day_temp:  -4.09322917","yday:  57<br />day_temp:  -8.21666667","yday:  58<br />day_temp:  -7.54531250","yday:  59<br />day_temp:  -6.24166667","yday:  60<br />day_temp:  -5.79739583","yday:  61<br />day_temp:  -6.67748691","yday:  62<br />day_temp:  -9.76439791","yday:  63<br />day_temp:  -8.71875000","yday:  64<br />day_temp:  -8.18437500","yday:  65<br />day_temp:  -7.40000000","yday:  66<br />day_temp:  -5.70260417","yday:  67<br />day_temp:  -2.46875000","yday:  68<br />day_temp:  -2.78385417","yday:  69<br />day_temp:  -3.44531250","yday:  70<br />day_temp:  -2.33072917","yday:  71<br />day_temp:  -2.99687500","yday:  72<br />day_temp:  -2.96666667","yday:  73<br />day_temp:  -3.69479167","yday:  74<br />day_temp:  -2.99270833","yday:  75<br />day_temp:  -3.92812500","yday:  76<br />day_temp:  -3.01250000","yday:  77<br />day_temp:  -3.47760417","yday:  78<br />day_temp:  -2.72656250","yday:  79<br />day_temp:  -1.81250000","yday:  80<br />day_temp:  -0.44947917","yday:  81<br />day_temp:  -2.86093750","yday:  82<br />day_temp:  -3.32656250","yday:  83<br />day_temp:  -2.28854167","yday:  84<br />day_temp:  -2.40732984","yday:  85<br />day_temp:  -2.88020833","yday:  86<br />day_temp:  -3.87656250","yday:  87<br />day_temp:  -1.35572917","yday:  88<br />day_temp:   0.43177083","yday:  89<br />day_temp:   0.75572917","yday:  90<br />day_temp:   0.49895833","yday:  91<br />day_temp:   0.57812500","yday:  92<br />day_temp:   1.38541667","yday:  93<br />day_temp:   3.00729167","yday:  94<br />day_temp:   0.86197917","yday:  95<br />day_temp:   0.00625000","yday:  96<br />day_temp:  -0.04114583","yday:  97<br />day_temp:   1.49062500","yday:  98<br />day_temp:   2.16282723","yday:  99<br />day_temp:   3.37395833","yday: 100<br />day_temp:   4.52968750","yday: 101<br />day_temp:   3.94947917","yday: 102<br />day_temp:   3.74843750","yday: 103<br />day_temp:   4.51875000","yday: 104<br />day_temp:   5.31041667","yday: 105<br />day_temp:   5.12656250","yday: 106<br />day_temp:   4.23177083","yday: 107<br />day_temp:   5.73697917","yday: 108<br />day_temp:   5.46243094","yday: 109<br />day_temp:   5.94583333","yday: 110<br />day_temp:   5.73229167","yday: 111<br />day_temp:   5.18177083","yday: 112<br />day_temp:   5.68489583","yday: 113<br />day_temp:   5.84375000","yday: 114<br />day_temp:   5.50625000","yday: 115<br />day_temp:   6.25104167","yday: 116<br />day_temp:   5.53697917","yday: 117<br />day_temp:   5.20156250","yday: 118<br />day_temp:   6.46093750","yday: 119<br />day_temp:   6.98385417","yday: 120<br />day_temp:   7.39583333","yday: 121<br />day_temp:   8.62146597","yday: 122<br />day_temp:  10.54973822","yday: 123<br />day_temp:  10.32239583","yday: 124<br />day_temp:  10.90364583","yday: 125<br />day_temp:  10.53385417","yday: 126<br />day_temp:  10.69218750","yday: 127<br />day_temp:  11.14240838","yday: 128<br />day_temp:  10.41458333","yday: 129<br />day_temp:  10.00104167","yday: 130<br />day_temp:   8.76145833","yday: 131<br />day_temp:   8.71979167","yday: 132<br />day_temp:   9.87083333","yday: 133<br />day_temp:  10.99270833","yday: 134<br />day_temp:  11.10104167","yday: 135<br />day_temp:  12.41720430","yday: 136<br />day_temp:  12.51041667","yday: 137<br />day_temp:  11.63593750","yday: 138<br />day_temp:  13.06614583","yday: 139<br />day_temp:  14.45416667","yday: 140<br />day_temp:  14.54114583","yday: 141<br />day_temp:  13.96979167","yday: 142<br />day_temp:  14.44270833","yday: 143<br />day_temp:  14.83717277","yday: 144<br />day_temp:  15.67656250","yday: 145<br />day_temp:  15.89322917","yday: 146<br />day_temp:  15.61197917","yday: 147<br />day_temp:  13.84166667","yday: 148<br />day_temp:  14.42419355","yday: 149<br />day_temp:  14.93750000","yday: 150<br />day_temp:  15.70364583","yday: 151<br />day_temp:  16.24062500","yday: 152<br />day_temp:  15.47968750","yday: 153<br />day_temp:  13.54895833","yday: 154<br />day_temp:  14.19114583","yday: 155<br />day_temp:  15.22031250","yday: 156<br />day_temp:  14.63177083","yday: 157<br />day_temp:  13.99947917","yday: 158<br />day_temp:  15.96875000","yday: 159<br />day_temp:  16.63697917","yday: 160<br />day_temp:  16.82604167","yday: 161<br />day_temp:  16.03229167","yday: 162<br />day_temp:  17.50833333","yday: 163<br />day_temp:  17.01927083","yday: 164<br />day_temp:  17.23333333","yday: 165<br />day_temp:  16.11614583","yday: 166<br />day_temp:  17.33697917","yday: 167<br />day_temp:  16.29375000","yday: 168<br />day_temp:  17.81093750","yday: 169<br />day_temp:  19.29583333","yday: 170<br />day_temp:  18.85677083","yday: 171<br />day_temp:  19.00989583","yday: 172<br />day_temp:  19.99218750","yday: 173<br />day_temp:  18.84062500","yday: 174<br />day_temp:  19.09270833","yday: 175<br />day_temp:  18.74010417","yday: 176<br />day_temp:  17.96302083","yday: 177<br />day_temp:  16.78697917","yday: 178<br />day_temp:  18.07760417","yday: 179<br />day_temp:  17.41250000","yday: 180<br />day_temp:  18.10106383","yday: 181<br />day_temp:  18.10833333","yday: 182<br />day_temp:  18.60000000","yday: 183<br />day_temp:  20.13177083","yday: 184<br />day_temp:  20.17343750","yday: 185<br />day_temp:  20.34739583","yday: 186<br />day_temp:  21.66822917","yday: 187<br />day_temp:  22.00625000","yday: 188<br />day_temp:  21.51354167","yday: 189<br />day_temp:  20.62916667","yday: 190<br />day_temp:  19.91822917","yday: 191<br />day_temp:  19.66197917","yday: 192<br />day_temp:  20.08333333","yday: 193<br />day_temp:  20.32604167","yday: 194<br />day_temp:  21.03541667","yday: 195<br />day_temp:  22.59629630","yday: 196<br />day_temp:  21.91729730","yday: 197<br />day_temp:  22.04010417","yday: 198<br />day_temp:  21.34791667","yday: 199<br />day_temp:  20.71718750","yday: 200<br />day_temp:  20.05260417","yday: 201<br />day_temp:  19.84583333","yday: 202<br />day_temp:  19.69427083","yday: 203<br />day_temp:  20.59427083","yday: 204<br />day_temp:  21.05183246","yday: 205<br />day_temp:  19.43478261","yday: 206<br />day_temp:  19.20729167","yday: 207<br />day_temp:  18.83020833","yday: 208<br />day_temp:  19.97604167","yday: 209<br />day_temp:  20.67656250","yday: 210<br />day_temp:  19.86666667","yday: 211<br />day_temp:  19.87604167","yday: 212<br />day_temp:  20.11406250","yday: 213<br />day_temp:  20.30208333","yday: 214<br />day_temp:  20.84739583","yday: 215<br />day_temp:  20.91562500","yday: 216<br />day_temp:  21.02578947","yday: 217<br />day_temp:  20.43750000","yday: 218<br />day_temp:  20.86369048","yday: 219<br />day_temp:  18.72142857","yday: 220<br />day_temp:  18.72678571","yday: 221<br />day_temp:  19.55755814","yday: 222<br />day_temp:  19.09687500","yday: 223<br />day_temp:  19.18854167","yday: 224<br />day_temp:  19.26562500","yday: 225<br />day_temp:  18.63229167","yday: 226<br />day_temp:  18.46979167","yday: 227<br />day_temp:  19.03229167","yday: 228<br />day_temp:  18.76979167","yday: 229<br />day_temp:  18.90000000","yday: 230<br />day_temp:  19.09375000","yday: 231<br />day_temp:  19.93229167","yday: 232<br />day_temp:  20.24531250","yday: 233<br />day_temp:  20.12708333","yday: 234<br />day_temp:  19.28440860","yday: 235<br />day_temp:  18.25781250","yday: 236<br />day_temp:  19.18489583","yday: 237<br />day_temp:  19.26979167","yday: 238<br />day_temp:  19.43697917","yday: 239<br />day_temp:  19.83489583","yday: 240<br />day_temp:  18.27864583","yday: 241<br />day_temp:  17.97447917","yday: 242<br />day_temp:  18.62291667","yday: 243<br />day_temp:  19.56770833","yday: 244<br />day_temp:  18.90937500","yday: 245<br />day_temp:  18.71875000","yday: 246<br />day_temp:  17.98906250","yday: 247<br />day_temp:  16.87864583","yday: 248<br />day_temp:  17.41093750","yday: 249<br />day_temp:  17.46562500","yday: 250<br />day_temp:  17.03560209","yday: 251<br />day_temp:  16.47395833","yday: 252<br />day_temp:  16.77708333","yday: 253<br />day_temp:  15.31979167","yday: 254<br />day_temp:  15.80468750","yday: 255<br />day_temp:  15.13020833","yday: 256<br />day_temp:  15.36458333","yday: 257<br />day_temp:  15.16927083","yday: 258<br />day_temp:  14.78333333","yday: 259<br />day_temp:  13.07172775","yday: 260<br />day_temp:  13.08489583","yday: 261<br />day_temp:  13.57291667","yday: 262<br />day_temp:  15.65208333","yday: 263<br />day_temp:  12.79476440","yday: 264<br />day_temp:  13.92447917","yday: 265<br />day_temp:  15.42604167","yday: 266<br />day_temp:  14.04893617","yday: 267<br />day_temp:  13.28437500","yday: 268<br />day_temp:  12.88465608","yday: 269<br />day_temp:  13.84166667","yday: 270<br />day_temp:  14.03750000","yday: 271<br />day_temp:  13.66822917","yday: 272<br />day_temp:  12.50625000","yday: 273<br />day_temp:  11.50744681","yday: 274<br />day_temp:  11.16041667","yday: 275<br />day_temp:  11.04427083","yday: 276<br />day_temp:  11.34739583","yday: 277<br />day_temp:  10.76594595","yday: 278<br />day_temp:  10.39739583","yday: 279<br />day_temp:  10.03645833","yday: 280<br />day_temp:  11.23437500","yday: 281<br />day_temp:  11.86770833","yday: 282<br />day_temp:   9.97395833","yday: 283<br />day_temp:   9.62656250","yday: 284<br />day_temp:   8.58697917","yday: 285<br />day_temp:   8.76770833","yday: 286<br />day_temp:   9.54166667","yday: 287<br />day_temp:  10.22083333","yday: 288<br />day_temp:   8.94166667","yday: 289<br />day_temp:   7.76510417","yday: 290<br />day_temp:   8.11406250","yday: 291<br />day_temp:   7.64842105","yday: 292<br />day_temp:   7.16822917","yday: 293<br />day_temp:   8.51510417","yday: 294<br />day_temp:   7.18125000","yday: 295<br />day_temp:   7.28870056","yday: 296<br />day_temp:   6.13353293","yday: 297<br />day_temp:   4.80178571","yday: 298<br />day_temp:   5.97486339","yday: 299<br />day_temp:   4.99375000","yday: 300<br />day_temp:   6.09042553","yday: 301<br />day_temp:   5.27864583","yday: 302<br />day_temp:   6.01927083","yday: 303<br />day_temp:   4.77864583","yday: 304<br />day_temp:   4.52291667","yday: 305<br />day_temp:   5.72539683","yday: 306<br />day_temp:   4.95312500","yday: 307<br />day_temp:   4.40989583","yday: 308<br />day_temp:   3.30000000","yday: 309<br />day_temp:   3.51263158","yday: 310<br />day_temp:   4.95156250","yday: 311<br />day_temp:   2.93958333","yday: 312<br />day_temp:   1.85156250","yday: 313<br />day_temp:   3.96354167","yday: 314<br />day_temp:   2.47031250","yday: 315<br />day_temp:   1.48072917","yday: 316<br />day_temp:   0.99687500","yday: 317<br />day_temp:   2.29322917","yday: 318<br />day_temp:   3.68534031","yday: 319<br />day_temp:   2.81458333","yday: 320<br />day_temp:   2.86875000","yday: 321<br />day_temp:   1.97968750","yday: 322<br />day_temp:   1.25989583","yday: 323<br />day_temp:   0.37604167","yday: 324<br />day_temp:  -0.32395833","yday: 325<br />day_temp:  -2.20885417","yday: 326<br />day_temp:  -0.82864583","yday: 327<br />day_temp:  -1.19408602","yday: 328<br />day_temp:  -1.12500000","yday: 329<br />day_temp:  -0.76458333","yday: 330<br />day_temp:  -0.38333333","yday: 331<br />day_temp:  -0.81302083","yday: 332<br />day_temp:  -3.37239583","yday: 333<br />day_temp:  -3.64166667","yday: 334<br />day_temp:  -3.92552083","yday: 335<br />day_temp:  -2.28697917","yday: 336<br />day_temp:  -3.05989583","yday: 337<br />day_temp:  -1.05989583","yday: 338<br />day_temp:  -1.05183246","yday: 339<br />day_temp:  -1.38333333","yday: 340<br />day_temp:  -0.66458333","yday: 341<br />day_temp:  -4.14062500","yday: 342<br />day_temp:  -5.16614583","yday: 343<br />day_temp:  -3.15781250","yday: 344<br />day_temp:  -4.37395833","yday: 345<br />day_temp:  -5.77864583","yday: 346<br />day_temp:  -6.03177083","yday: 347<br />day_temp:  -4.94031414","yday: 348<br />day_temp:  -7.92604167","yday: 349<br />day_temp:  -6.56354167","yday: 350<br />day_temp:  -8.90364583","yday: 351<br />day_temp: -11.49114583","yday: 352<br />day_temp:  -8.14687500","yday: 353<br />day_temp:  -5.76302083","yday: 354<br />day_temp:  -8.66197917","yday: 355<br />day_temp:  -6.95625000","yday: 356<br />day_temp:  -4.89842105","yday: 357<br />day_temp:  -3.88697917","yday: 358<br />day_temp:  -6.22291667","yday: 359<br />day_temp:  -7.02604167","yday: 360<br />day_temp:  -7.06979167","yday: 361<br />day_temp:  -8.29895833","yday: 362<br />day_temp:  -7.07656250","yday: 363<br />day_temp: -10.96439791","yday: 364<br />day_temp: -11.86250000","yday: 365<br />day_temp: -10.24867725","yday: 366<br />day_temp: -12.87083333"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":48.1461187214612,"r":7.30593607305936,"b":44.5662100456621,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"Average daily temperature in Quebec City,<br />2010-2017","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-17.25,384.25],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"Day of the year (number)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-15.6827054398148,24.4191059027778],"tickmode":"array","ticktext":["-10","0","10","20"],"tickvals":[-10,0,10,20],"categoryorder":"array","categoryarray":["-10","0","10","20"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Temperature (C)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"30e8782538de":{"x":{},"y":{},"type":"scatter"}},"cur_data":"30e8782538de","visdat":{"30e8782538de":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script> I know that the “heating degree days” is a measurement designed to quantify the demand for energy needed to heat a building and is defined as the difference between the day’s average temperature and 18C. However, I do not heat between May 15th (day 135) and September 15th (day 258), so I define the heating season as the period where the daily average temperature is below 13C.</p>
<p><strong>It is important to use the hourly temperature rather than the daily average temperature when working with heat pumps</strong> For example, 12 hours at night at -16C and 12 hours during the day at 0C is not equivalent to 24 hours at -8C. In that scenario, the heat pump would shut down at night, but if you only looked at the daily average you would think that it worked for 24 hours.</p>
<p><img src="/post/2018-11-22-heatpump_files/figure-html/heating_season-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="house-heating-needs" class="section level1">
<h1>House heating needs</h1>
<p>To estimate the heating needs of my house at all temperatures, I have held the inside temperature of my house constant at 21 Celsius between November 3rd and November 20th 2018.</p>
<p>Hydro-Québec (my electricity provided) uses smart meters, so I can now download a <code>.csv</code> with my hourly electricity consumption in kWh from my customer account. They have even added the outside temperature! I will use these two values to model my heating needs as a function of the outside temperature.</p>
<p>I argue that almost 100% of my electricity consumption goes to heating. For example, all the electricity used by my fridge, computer and light is eventually 100% converted into heat that my electric furnace won’t need to generate. The only electricity that is “wasted” is hot water, since that hot water is just flushed down the drain and doesnt warm up my house.</p>
<p>The biggest use of hot water is in the morning (adult shower) and evening (children bath), but hopefully that won’t break the model.</p>
<p>It appears that we can model the kWh as a linear function of temperature ( awesome!) <img src="/post/2018-11-22-heatpump_files/figure-html/graph_electricity_needs-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>Let’s model the electricty consumption (proxy for heating needs) :</p>
<pre><code>## 
## Call:
## lm(formula = kWh ~ temperature, data = hydro %&gt;% filter(date &gt;= 
##     lubridate::ymd(start)))
## 
## Coefficients:
## (Intercept)  temperature  
##      4.2475      -0.1599</code></pre>
</div>
<div id="putting-it-all-together" class="section level1">
<h1>Putting it all together</h1>
<p>We can finally combine all the sources. For each hour during the heating seasons between 2010 and 2017, we will figure out my house’s energy needs. We will then look at the heat pump’s capacity and efficiency to figure out which system will be used (heat pump or backup). Knowing which system is in use, we will estimate my house’s energy needs for that hour.</p>
<p>We will then be able to calculate the coefficient of performance the heat pump would have had for each year.</p>
<p><img src="/post/2018-11-22-heatpump_files/figure-html/unnamed-chunk-5-1.png" width="960" style="display: block; margin: auto;" /><img src="/post/2018-11-22-heatpump_files/figure-html/unnamed-chunk-5-2.png" width="960" style="display: block; margin: auto;" /><img src="/post/2018-11-22-heatpump_files/figure-html/unnamed-chunk-5-3.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>The table below summarise the findings.</p>
<p>First, a sanity check: the model predicts that I am currently spending about 1708$ per year on average on heating if I do not change anything. This is 57% of my total electricity bill, which fits right inside the rule of thumb we mentionned earlier.</p>
<p>My local adjusted COP of 1.97 is slightly lower than the published COP of 2.16, which is expected since my region is colder than Ottawa. The savings of 804$ represent 49% of my predicted heating bill and 26.8% of my total electricity bill.</p>
<p>Ignoring compounding interests (it is 2AM after all), the payback period on the extra 4000 $ I spend to get the heat pump over the air conditionning would only be 5 years. The remaining 5 years of life in the heat pump would be profit, or a cushion to protect against problems.</p>
<p>If I only bought the heat pump for the heating efficiency gains (7 500$), then the payback period would be almost 10 years, ignoring interests and maintenance. This is the expected life of the unit, and this wouldnt be economically viable.</p>
<p>Thus, it appears that getting the heat pump is a good idea if you were getting the air conditionning anyway, but is not a good idea if you were not.</p>
<p><strong>Next step: buy the damn thing. It will be very interesting to model my energy consumption as a piecewise regression once I get my heat pump installed.</strong></p>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"none","caption":"<caption>Summary<\/caption>","data":[["2010","2011","2012","2013","2014","2015","2016","2017","average"],[2.32041440715877,2.05012647456563,2.09997394132812,1.87106986967438,1.79592932577417,1.75640062028723,2.10044295162318,1.90100462520314,1.96704271077027],[917.323856192645,868.50851213739,873.747100181297,802.376426654264,787.304001559585,759.96543373645,897.726195958908,809.483143448494,839.554333733629],[23029.2580917841,24222.283658805,23829.7351906397,24621.6489189487,25378.1029279367,25209.6899713707,24478.7488010824,24398.6570525987,24396.0155766458],[9924.63157474628,11815.0191996994,11347.6337594783,13159.1285381735,14130.9029056569,14353.0409179929,11654.0888588122,12834.6121461917,12402.3822375939],[1612.04806642489,1695.55985611635,1668.08146334478,1723.51542432641,1776.46720495557,1764.67829799595,1713.51241607576,1707.90599368191,1707.7210903652],[694.72421023224,827.05134397896,794.334363163484,921.138997672146,989.163203395986,1004.7128642595,815.786220116857,898.422850233417,868.166756631574],[0.569042496497662,0.5122252151727,0.523803614740307,0.465546414803831,0.443185215782959,0.430653810725446,0.52390994517265,0.473962352988414,0.491622629989354]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>year<\/th>\n      <th>real_COP<\/th>\n      <th>savings_dollar<\/th>\n      <th>kWh_required<\/th>\n      <th>real_kWh<\/th>\n      <th>energy_cost_furnace_only<\/th>\n      <th>energy_cost_with_heatpump<\/th>\n      <th>savings_pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","ordering":false,"pageLength":100,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nDTWidget.formatPercentage(this, row, data, 7, 0, 3, ',', '.');\nDTWidget.formatCurrency(this, row, data, 5, '$', 0, 3, ',', '.', true);\nDTWidget.formatCurrency(this, row, data, 6, '$', 0, 3, ',', '.', true);\nDTWidget.formatCurrency(this, row, data, 2, '$', 0, 3, ',', '.', true);\nDTWidget.formatRound(this, row, data, 3, 0, 3, ',', '.');\nDTWidget.formatRound(this, row, data, 4, 0, 3, ',', '.');\nDTWidget.formatRound(this, row, data, 1, 2, 3, ',', '.');\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
